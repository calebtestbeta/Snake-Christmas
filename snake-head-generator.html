<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è–èª•è›‡é ­è¨­è¨ˆç”Ÿæˆå™¨</title>
    <!-- æ”¹ç”¨åŸç”ŸCanvas APIï¼Œä¸éœ€è¦P5.js -->
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0F0F23 0%, #191970 50%, #0F0F23 100%);
            color: #FFD700;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }
        
        h1 {
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .preview-section {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }
        
        .canvas-container {
            display: inline-block;
            margin: 20px;
            padding: 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            border: 2px solid rgba(255,215,0,0.3);
        }
        
        .direction-label {
            font-weight: bold;
            margin-bottom: 10px;
            color: #FFD700;
        }
        
        .controls {
            margin: 30px 0;
        }
        
        button {
            background: linear-gradient(45deg, #B8860B, #DAA520);
            color: #013;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255,215,0,0.4);
        }
        
        .size-controls {
            margin: 20px 0;
        }
        
        .size-controls label {
            margin: 0 10px;
            font-weight: bold;
        }
        
        .size-controls input {
            margin: 0 10px;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        
        .description {
            text-align: left;
            background: rgba(255,215,0,0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #FFD700;
        }
        
        .download-info {
            background: rgba(0,255,0,0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #00FF00;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ è–èª•è›‡é ­è¨­è¨ˆç”Ÿæˆå™¨</h1>
        
        <div class="description">
            <h3>ğŸ“‹ è¨­è¨ˆèªªæ˜</h3>
            <p>â€¢ <strong>ç›®çš„</strong>ï¼šç‚ºè–èª•è²ªé£Ÿè›‡éŠæˆ²è¨­è¨ˆæ¸…æ™°çš„æ–¹å‘æ€§ç®­é ­è›‡é ­</p>
            <p>â€¢ <strong>è¨­è¨ˆç‰¹è‰²</strong>ï¼šç®­é ­å½¢ç‹€ã€è–èª•æ˜Ÿé»è£é£¾ã€å‹•æ…‹è®Šè‰²ç³»çµ±</p>
            <p>â€¢ <strong>è‰²å½©ä¸»é¡Œ</strong>ï¼šè–èª•é‡‘è‰²ç³» (#FFD700, #B8860B) é…ç™½è‰²è–èª•è£é£¾</p>
            <p>â€¢ <strong>æŠ€è¡“éœ€æ±‚</strong>ï¼šå››å€‹æ–¹å‘çš„ç®­é ­åœ–æ¡ˆï¼Œæ”¯æ´é£Ÿç‰©é¡å‹è®Šè‰²</p>
        </div>
        
        <div class="size-controls">
            <label for="cellSize">Cell å¤§å°:</label>
            <input type="range" id="cellSize" min="20" max="60" value="40" onchange="updateSize()">
            <span id="cellSizeValue">40</span>px
            
            <button onclick="regenerateHeads()">ğŸ”„ é‡æ–°ç”Ÿæˆ</button>
        </div>
        
        <div class="preview-section">
            <h2>ğŸ¯ å››æ–¹å‘è›‡é ­é è¦½</h2>
            <div id="preview-container">
                <!-- Canvas elements will be inserted here -->
            </div>
        </div>
        
        <div class="controls">
            <button onclick="downloadAllHeads()">ğŸ“¥ ä¸‹è¼‰æ‰€æœ‰æ–¹å‘ (ZIP)</button>
            <button onclick="downloadSinglePNG()">ğŸ–¼ï¸ ä¸‹è¼‰å–®å¼µå¤§åœ–</button>
            <button onclick="generateGameSizePNG()">ğŸ® ç”ŸæˆéŠæˆ²ç”¨PNG (å»ºè­°)</button>
        </div>
        
        <div class="download-info">
            <h3>ğŸ’¡ ä½¿ç”¨å»ºè­°</h3>
            <p>1. <strong>éŠæˆ²ç”¨PNG</strong>: é»æ“Šã€Œç”ŸæˆéŠæˆ²ç”¨PNGã€æœƒç”¢ç”Ÿä¸€å¼µåŒ…å«å››å€‹æ–¹å‘çš„PNGåœ–ç‰‡</p>
            <p>2. <strong>æª”æ¡ˆæ”¾ç½®</strong>: ä¸‹è¼‰å¾Œå°‡PNGæª”æ¡ˆæ”¾åœ¨ <code>/images/snake-head.png</code></p>
            <p>3. <strong>éŠæˆ²æ•´åˆ</strong>: æˆ‘æœƒå¹«ä½ ä¿®æ”¹éŠæˆ²ä»£ç¢¼ä»¥ä½¿ç”¨PNGåœ–ç‰‡è€ŒéP5.jsç¹ªåœ–</p>
            <p>4. <strong>æ•ˆèƒ½å„ªåŒ–</strong>: ä½¿ç”¨PNGåœ–ç‰‡æ¯”å³æ™‚ç¹ªåœ–æ›´é«˜æ•ˆï¼Œç‰¹åˆ¥æ˜¯åœ¨ç§»å‹•è¨­å‚™ä¸Š</p>
        </div>
    </div>

    <script>
        let cellSize = 40;
        let canvases = [];
        
        // DOMè¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            generateHeads();
        });
        
        function generateHeads() {
            const container = document.getElementById('preview-container');
            container.innerHTML = ''; // æ¸…ç©ºç¾æœ‰å…§å®¹
            canvases = []; // é‡ç½®canvasé™£åˆ—
            
            const directions = [
                { name: 'RIGHT', label: 'â†’ å‘å³', rotation: 0 },
                { name: 'LEFT', label: 'â† å‘å·¦', rotation: Math.PI },
                { name: 'UP', label: 'â†‘ å‘ä¸Š', rotation: -Math.PI/2 },
                { name: 'DOWN', label: 'â†“ å‘ä¸‹', rotation: Math.PI/2 }
            ];
            
            console.log('é–‹å§‹ç”Ÿæˆè›‡é ­ï¼ŒcellSize:', cellSize);
            
            directions.forEach((dir, index) => {
                // å»ºç«‹å®¹å™¨
                const canvasContainer = document.createElement('div');
                canvasContainer.className = 'canvas-container';
                
                const label = document.createElement('div');
                label.className = 'direction-label';
                label.textContent = dir.label;
                canvasContainer.appendChild(label);
                
                // å»ºç«‹åŸç”ŸCanvaså…ƒç´ 
                const canvasSize = cellSize * 3;
                const canvas = document.createElement('canvas');
                canvas.width = canvasSize;
                canvas.height = canvasSize;
                canvas.style.border = '2px solid #FFD700';
                canvas.style.backgroundColor = 'rgba(240, 240, 255, 0.1)';
                
                const ctx = canvas.getContext('2d');
                canvases.push({ canvas, ctx, direction: dir.name, rotation: dir.rotation });
                
                console.log(`ç”Ÿæˆ ${dir.name} æ–¹å‘è›‡é ­ï¼Œcanvaså¤§å°: ${canvasSize}x${canvasSize}`);
                
                // ç¹ªè£½è›‡é ­
                drawSnakeHead(ctx, canvasSize, dir.rotation);
                
                // å°‡canvasåŠ åˆ°DOM
                canvasContainer.appendChild(canvas);
                container.appendChild(canvasContainer);
            });
        }
        
        function drawSnakeHead(ctx, canvasSize, rotation) {
            const centerX = canvasSize / 2;
            const centerY = canvasSize / 2;
            const headSize = cellSize * 0.6;  // å°æ‡‰éŠæˆ²ä¸­çš„ç®­é ­å¤§å°ï¼ˆæ”¾å¤§ç‰ˆï¼‰
            
            console.log(`ç¹ªè£½è–èª•ç®­é ­è›‡é ­ï¼ŒheadSize: ${headSize}, rotation: ${rotation}`);
            
            // æ¸…é™¤canvas
            ctx.clearRect(0, 0, canvasSize, canvasSize);
            
            // ä¿å­˜ç•¶å‰ç‹€æ…‹
            ctx.save();
            
            // ç§»åˆ°ä¸­å¿ƒä¸¦æ—‹è½‰
            ctx.translate(centerX, centerY);
            ctx.rotate(rotation);
            
            // ç®­é ­ä¸»é«” - è–èª•é‡‘è‰²
            ctx.fillStyle = 'rgb(255, 215, 0)';     // è–èª•é‡‘è‰²
            ctx.strokeStyle = 'rgb(184, 134, 11)';  // æ·±é‡‘è‰²é‚Šæ¡†
            ctx.lineWidth = 3;
            
            const arrowLength = headSize * 1.0;  // å¢åŠ é•·åº¦è®“ç®­é ­æ›´å»¶å±•
            const arrowWidth = headSize * 0.7;   // ç¨å¾®å¢åŠ å¯¬åº¦
            const shaftWidth = headSize * 0.4;   // å¢åŠ æ¡¿èº«å¯¬åº¦ï¼Œæ›´å¥½é€£æ¥
            
            // ç®­é ­å½¢ç‹€ï¼ˆä½¿ç”¨ä¸‰è§’å½¢å’ŒçŸ©å½¢çµ„åˆï¼Œå»¶ä¼¸é€£æ¥è¨­è¨ˆï¼‰
            ctx.beginPath();
            // ç®­é ­å°–ç«¯
            ctx.moveTo(arrowLength * 0.5, 0);              // ç®­é ­å°–ï¼ˆå‘å‰å»¶ä¼¸ï¼‰
            ctx.lineTo(arrowLength * 0.2, -arrowWidth);    // ä¸Šè§’
            ctx.lineTo(arrowLength * 0.2, arrowWidth);     // ä¸‹è§’
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // ç®­é ­æ¡¿èº«ï¼ˆå»¶ä¼¸åˆ°å¹¾ä¹å¡«æ»¿æ ¼å­ï¼‰
            ctx.beginPath();
            ctx.rect(-arrowLength * 0.5, -shaftWidth, arrowLength * 0.7, shaftWidth * 2);
            ctx.fill();
            ctx.stroke();
            
            // ç¹ªè£½è–èª•è£é£¾ï¼ˆé è¨­ç‹€æ…‹ï¼‰
            ctx.fillStyle = 'rgb(255, 255, 255)';  // ç™½è‰²è£é£¾
            ctx.strokeStyle = 'none';
            
            const accentSize = headSize * 0.15;
            
            // ä¸­å¿ƒè–èª•æ˜Ÿ
            drawStar(ctx, 0, 0, accentSize * 0.6, 4);
            
            // å‘¨åœçš„é›ªèŠ±é»
            for (let i = 0; i < 4; i++) {
                const angle = i * Math.PI / 2;
                const x = Math.cos(angle) * accentSize * 0.8;
                const y = Math.sin(angle) * accentSize * 0.8;
                ctx.beginPath();
                ctx.arc(x, y, accentSize * 0.15, 0, 2 * Math.PI);
                ctx.fill();
            }
            
            // æ¢å¾©ç‹€æ…‹
            ctx.restore();
        }
        
        // è¼”åŠ©å‡½æ•¸ï¼šç¹ªè£½æ˜Ÿæ˜Ÿ
        function drawStar(ctx, x, y, radius, points) {
            const angle = (Math.PI * 2) / points;
            const halfAngle = angle / 2;
            
            ctx.save();
            ctx.translate(x, y);
            ctx.beginPath();
            
            for (let i = 0; i < points; i++) {
                const outerAngle = i * angle;
                const innerAngle = outerAngle + halfAngle;
                
                const outerX = Math.cos(outerAngle) * radius;
                const outerY = Math.sin(outerAngle) * radius;
                const innerX = Math.cos(innerAngle) * radius * 0.5;
                const innerY = Math.sin(innerAngle) * radius * 0.5;
                
                if (i === 0) {
                    ctx.moveTo(outerX, outerY);
                } else {
                    ctx.lineTo(outerX, outerY);
                }
                ctx.lineTo(innerX, innerY);
            }
            
            ctx.closePath();
            ctx.fill();
            ctx.restore();
        }
        
        function updateSize() {
            const slider = document.getElementById('cellSize');
            const valueDisplay = document.getElementById('cellSizeValue');
            cellSize = parseInt(slider.value);
            valueDisplay.textContent = cellSize;
        }
        
        function regenerateHeads() {
            generateHeads();
        }
        
        function downloadSinglePNG() {
            if (canvases.length === 0) return;
            
            // ä½¿ç”¨ç¬¬ä¸€å€‹canvas (å‘å³) ä½œç‚ºä¸‹è¼‰
            const canvas = canvases[0].canvas;
            const link = document.createElement('a');
            link.download = 'snake-head-right.png';
            link.href = canvas.toDataURL();
            link.click();
        }
        
        function generateGameSizePNG() {
            // å»ºç«‹ä¸€å¼µåŒ…å«å››å€‹æ–¹å‘çš„å¤§åœ–
            const combinedCanvas = document.createElement('canvas');
            const combinedSize = cellSize * 8;
            combinedCanvas.width = combinedSize;
            combinedCanvas.height = cellSize * 2;
            const combinedCtx = combinedCanvas.getContext('2d');
            
            // è¨­å®šé€æ˜èƒŒæ™¯
            combinedCtx.clearRect(0, 0, combinedSize, cellSize * 2);
            
            // ç¹ªè£½å››å€‹æ–¹å‘çš„è›‡é ­
            const directions = [
                { rotation: 0, x: cellSize },                    // RIGHT
                { rotation: Math.PI, x: cellSize * 3 },          // LEFT  
                { rotation: -Math.PI/2, x: cellSize * 5 },       // UP
                { rotation: Math.PI/2, x: cellSize * 7 }         // DOWN
            ];
            
            directions.forEach((dir) => {
                combinedCtx.save();
                combinedCtx.translate(dir.x, cellSize);
                combinedCtx.rotate(dir.rotation);
                
                const headSize = cellSize * 0.6;
                
                // ç®­é ­ä¸»é«” - è–èª•é‡‘è‰²
                combinedCtx.fillStyle = 'rgb(255, 215, 0)';
                combinedCtx.strokeStyle = 'rgb(184, 134, 11)';
                combinedCtx.lineWidth = 3;
                
                const arrowLength = headSize * 1.0;  // å¢åŠ é•·åº¦è®“ç®­é ­æ›´å»¶å±•
                const arrowWidth = headSize * 0.7;   // ç¨å¾®å¢åŠ å¯¬åº¦
                const shaftWidth = headSize * 0.4;   // å¢åŠ æ¡¿èº«å¯¬åº¦ï¼Œæ›´å¥½é€£æ¥
                
                // ç®­é ­å°–ç«¯
                combinedCtx.beginPath();
                combinedCtx.moveTo(arrowLength * 0.5, 0);
                combinedCtx.lineTo(arrowLength * 0.2, -arrowWidth);
                combinedCtx.lineTo(arrowLength * 0.2, arrowWidth);
                combinedCtx.closePath();
                combinedCtx.fill();
                combinedCtx.stroke();
                
                // ç®­é ­æ¡¿èº«
                combinedCtx.beginPath();
                combinedCtx.rect(-arrowLength * 0.5, -shaftWidth, arrowLength * 0.7, shaftWidth * 2);
                combinedCtx.fill();
                combinedCtx.stroke();
                
                // è–èª•è£é£¾
                combinedCtx.fillStyle = 'rgb(255, 255, 255)';
                const accentSize = headSize * 0.15;
                
                // ä¸­å¿ƒè–èª•æ˜Ÿ
                drawStarCombined(combinedCtx, 0, 0, accentSize * 0.6, 4);
                
                // å‘¨åœé›ªèŠ±é»
                for (let j = 0; j < 4; j++) {
                    const angle = j * Math.PI / 2;
                    const x = Math.cos(angle) * accentSize * 0.8;
                    const y = Math.sin(angle) * accentSize * 0.8;
                    combinedCtx.beginPath();
                    combinedCtx.arc(x, y, accentSize * 0.15, 0, 2 * Math.PI);
                    combinedCtx.fill();
                }
                
                combinedCtx.restore();
            });
            
            // ä¸‹è¼‰çµ„åˆåœ–ç‰‡
            const link = document.createElement('a');
            link.download = 'snake-heads-combined.png';
            link.href = combinedCanvas.toDataURL();
            link.click();
        }
        
        // ç”¨æ–¼çµ„åˆåœ–ç‰‡çš„æ˜Ÿæ˜Ÿç¹ªè£½å‡½æ•¸
        function drawStarCombined(ctx, x, y, radius, points) {
            const angle = (Math.PI * 2) / points;
            const halfAngle = angle / 2;
            
            ctx.save();
            ctx.translate(x, y);
            ctx.beginPath();
            
            for (let i = 0; i < points; i++) {
                const outerAngle = i * angle;
                const innerAngle = outerAngle + halfAngle;
                
                const outerX = Math.cos(outerAngle) * radius;
                const outerY = Math.sin(outerAngle) * radius;
                const innerX = Math.cos(innerAngle) * radius * 0.5;
                const innerY = Math.sin(innerAngle) * radius * 0.5;
                
                if (i === 0) {
                    ctx.moveTo(outerX, outerY);
                } else {
                    ctx.lineTo(outerX, outerY);
                }
                ctx.lineTo(innerX, innerY);
            }
            
            ctx.closePath();
            ctx.fill();
            ctx.restore();
        }
        
        function downloadAllHeads() {
            // ä¾åºä¸‹è¼‰å››å€‹æ–¹å‘
            canvases.forEach((item, index) => {
                setTimeout(() => {
                    const link = document.createElement('a');
                    link.download = `snake-head-${item.direction.toLowerCase()}.png`;
                    link.href = item.canvas.toDataURL();
                    link.click();
                }, index * 500);
            });
        }
    </script>
</body>
</html>