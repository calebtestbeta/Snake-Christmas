<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GA4 æ¸¬è©¦è¼”åŠ©å·¥å…·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            background: #4285f4;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #3367d6;
        }
        .log {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .success {
            color: #28a745;
        }
        .error {
            color: #dc3545;
        }
        .info {
            color: #17a2b8;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ GA4 äº‹ä»¶æ¸¬è©¦å·¥å…·</h1>
        <p>é€™å€‹å·¥å…·å¯ä»¥å¹«åŠ©ä½ æ¸¬è©¦ GA4 äº‹ä»¶æ˜¯å¦æ­£ç¢ºç™¼é€</p>
        
        <div class="test-section">
            <h3>ğŸ“‹ æª¢æŸ¥æ¸…å–®</h3>
            <div id="checklist">
                <div>âœ… GA4 è…³æœ¬è¼‰å…¥æª¢æŸ¥</div>
                <div id="gtag-check">â“ gtag å‡½æ•¸å¯ç”¨æ€§æª¢æŸ¥</div>
                <div id="measurement-check">â“ æ¸¬é‡ ID è¨­å®šæª¢æŸ¥</div>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ§ª äº‹ä»¶æ¸¬è©¦</h3>
            <button onclick="testGameStartEvent()">æ¸¬è©¦éŠæˆ²é–‹å§‹äº‹ä»¶</button>
            <button onclick="testPhraseEvent()">æ¸¬è©¦è©å¥å®Œæˆäº‹ä»¶</button>
            <button onclick="testGameEndEvent()">æ¸¬è©¦éŠæˆ²çµæŸäº‹ä»¶</button>
            <button onclick="clearLog()">æ¸…é™¤æ—¥èªŒ</button>
        </div>

        <div class="test-section">
            <h3>ğŸ“Š äº‹ä»¶æ—¥èªŒ</h3>
            <div id="eventLog" class="log">é»æ“Šä¸Šæ–¹æŒ‰éˆ•é–‹å§‹æ¸¬è©¦...</div>
        </div>

        <div class="test-section">
            <h3>ğŸ“– èªªæ˜</h3>
            <p><strong>å¦‚ä½•é©—è­‰äº‹ä»¶ç™¼é€æˆåŠŸï¼š</strong></p>
            <ol>
                <li>æ‰“é–‹ç€è¦½å™¨é–‹ç™¼è€…å·¥å…· (F12)</li>
                <li>åˆ‡æ›åˆ° "Network" (ç¶²è·¯) åˆ†é </li>
                <li>ç¯©é¸ "google-analytics.com" æˆ– "collect"</li>
                <li>é»æ“Šæ¸¬è©¦æŒ‰éˆ•ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰æ–°çš„è«‹æ±‚å‡ºç¾</li>
                <li>å‰å¾€ GA4 å³æ™‚å ±è¡¨ç¢ºèªæ•¸æ“šæ¥æ”¶</li>
            </ol>
        </div>
    </div>

    <!-- GA4 è¿½è¹¤ç¢¼ -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LZ4KDGDLED"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-LZ4KDGDLED');
    </script>

    <script>
        function log(message, type = 'info') {
            const logElement = document.getElementById('eventLog');
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'error' ? 'error' : type === 'success' ? 'success' : 'info';
            logElement.innerHTML += `<span class="${className}">[${timestamp}] ${message}</span>\n`;
            logElement.scrollTop = logElement.scrollHeight;
        }

        function clearLog() {
            document.getElementById('eventLog').innerHTML = '';
        }

        // æª¢æŸ¥ GA4 è¨­å®š
        window.onload = function() {
            // æª¢æŸ¥ gtag å‡½æ•¸
            if (typeof gtag !== 'undefined') {
                document.getElementById('gtag-check').innerHTML = 'âœ… gtag å‡½æ•¸å·²è¼‰å…¥';
                log('GA4 gtag å‡½æ•¸è¼‰å…¥æˆåŠŸ', 'success');
            } else {
                document.getElementById('gtag-check').innerHTML = 'âŒ gtag å‡½æ•¸æœªè¼‰å…¥';
                log('éŒ¯èª¤ï¼šGA4 gtag å‡½æ•¸æœªè¼‰å…¥', 'error');
            }

            // æª¢æŸ¥æ¸¬é‡ ID
            document.getElementById('measurement-check').innerHTML = 'âœ… æ¸¬é‡ ID: G-LZ4KDGDLED';
            log('æ¸¬é‡ ID è¨­å®šï¼šG-LZ4KDGDLED', 'success');
        };

        function testGameStartEvent() {
            log('ğŸš€ æ¸¬è©¦éŠæˆ²é–‹å§‹äº‹ä»¶...', 'info');
            if (typeof gtag !== 'undefined') {
                gtag('event', 'game_start', {
                    'event_category': 'engagement',
                    'event_label': 'christmas_snake_game',
                    'difficulty': 'test_mode'
                });
                log('âœ… éŠæˆ²é–‹å§‹äº‹ä»¶å·²ç™¼é€', 'success');
            } else {
                log('âŒ ç„¡æ³•ç™¼é€äº‹ä»¶ï¼šgtag æœªå®šç¾©', 'error');
            }
        }

        function testPhraseEvent() {
            log('ğŸ„ æ¸¬è©¦è©å¥å®Œæˆäº‹ä»¶...', 'info');
            if (typeof gtag !== 'undefined') {
                gtag('event', 'phrase_completed', {
                    'event_category': 'achievement',
                    'event_label': 'è–èª•å¿«æ¨‚',
                    'phrase_length': 4,
                    'total_completed': 1
                });
                log('âœ… è©å¥å®Œæˆäº‹ä»¶å·²ç™¼é€ (è–èª•å¿«æ¨‚)', 'success');
            } else {
                log('âŒ ç„¡æ³•ç™¼é€äº‹ä»¶ï¼šgtag æœªå®šç¾©', 'error');
            }
        }

        function testGameEndEvent() {
            log('ğŸ æ¸¬è©¦éŠæˆ²çµæŸäº‹ä»¶...', 'info');
            if (typeof gtag !== 'undefined') {
                gtag('event', 'game_end', {
                    'event_category': 'engagement',
                    'event_label': 'christmas_snake_game',
                    'score': 15,
                    'completed_phrases': 2,
                    'game_duration': 45,
                    'difficulty': 'test_mode'
                });
                log('âœ… éŠæˆ²çµæŸäº‹ä»¶å·²ç™¼é€', 'success');
            } else {
                log('âŒ ç„¡æ³•ç™¼é€äº‹ä»¶ï¼šgtag æœªå®šç¾©', 'error');
            }
        }
    </script>
</body>
</html>